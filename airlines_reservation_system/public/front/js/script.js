Travel.Date={HighlightDays:function(n){var t=n.getMonth()+1,i=n.getDate(),r=(i<10?"0".concat(i):i.toString())+"-"+(t<10?"0".concat(t):t.toString());return["01-01","30-04","01-05","02-09"].indexOf(r)>-1?"ftl-holidays":""},LunaCalendar:function(){$.each($("td.day"),function(){$(this).html("");var u=$(this).attr("data-date"),o=$(this).html(),t=new Date(parseInt(u)),r=t.getDate(),f=parseInt(t.getMonth())+1,e=t.getFullYear(),n=convertSolar2Lunar(parseInt(r),parseInt(f),parseInt(e),parseInt(7)),i=n[0];i=parseInt(i)==1?n[0]+"-"+n[1]:n[0];$(this).html('<label class="cld">'+r+'<\/label><label class="cld_lunar">'+i+"<\/label>");$(this).parent().find("td.new.day").length==7&&$(this).parent().addClass("hide");$(this).parent().find("td.old.day").length==7&&$(this).parent().addClass("hide");$(this).parent().find("td.old.day").addClass("disabled");$(this).parent().find("td.new.day").addClass("disabled")})},DepartureDate:function(){var i=new Date,n=i.getDate(),t=i.getMonth()+1,r=i.getFullYear();return n=n<10?"0".concat(n):n.toString(),t=t<10?"0".concat(t):t.toString(),n.concat("-").concat(t).concat("-").concat(r)},ReturnDate:function(){var n=new Date;n.setDate(n.getDate()+1);var t=n.getDate(),i=n.getMonth()+1,r=n.getFullYear();return t=t<10?"0".concat(t):t.toString(),i=i<10?"0".concat(i):i.toString(),t.concat("-").concat(i).concat("-").concat(r)},CurrentDate:function(){var i=new Date,n=i.getDate(),t=i.getMonth()+1,r=i.getFullYear();return n=n<10?"0".concat(n):n.toString(),t=t<10?"0".concat(t):t.toString(),n.concat("-").concat(t).concat("-").concat(r)},CurrentMonth:function(){var t=new Date,n=t.getMonth()+1,i=t.getFullYear();return n=n<10?"0".concat(n):n.toString(),n.concat("-").concat(i)},ListMonth:function(n){var e="",u,f,r,i,t,o,s;for(n!=null&&n.length==7&&(u=n.split("-"),e=u[1].concat("-").concat(u[0]).concat("-").concat("01")),f=[],r=0;r<3;r++)i=new Date(e),i.setMonth(i.getMonth()+r),t=i.getMonth()+1,o=i.getFullYear(),t=t<10?"0".concat(t):t.toString(),s=t.concat("-").concat(o),f.push(s);return f},NextMonth:function(n){var r="",t,f;if(n!=null&&n.length==7){var u=n.split("-"),e=u[1].concat("-").concat(u[0]).concat("-").concat("01"),i=new Date(e);i.setMonth(i.getMonth()+1);t=i.getMonth()+1;f=i.getFullYear();t=t<10?"0".concat(t):t.toString();r=t.concat("-").concat(f)}return r},NextDate:function(n){try{n.setDate(n.getDate()+1);var t=n.getDate(),i=n.getMonth()+1,r=n.getFullYear();return t=t<10?"0".concat(t):t.toString(),i=i<10?"0".concat(i):i.toString(),t.concat("-").concat(i).concat("-").concat(r)}catch(u){console.log(u)}return""},ConvertYYYMMDD:function(n){try{var t=n.substring(0,2),i=n.substring(3,5),r=n.substring(6,10);return r.concat(i).concat(t)}catch(u){console.log(u)}return""},DatePicker:function(){var r=Travel.SearchPrm.Flight[0],t=$('input[id="ftl-date-departure"]'),n=$('input[id="ftl-date-return"]'),f={format:"dd-mm-yyyy",autoclose:!0,language:ftlLang,todayBtn:"linked",todayHighlight:!0,startDate:"-0d",changeMonth:!0,stepMonths:0,beforeShowDay:Travel.Date.HighlightDays},u;t.datepicker(f);n.datepicker(f);$(t).datepicker().on("show",function(n){Travel.Date.PrevCalendar(n.dates);Travel.Date.LunaCalendar();$(".ftl-calendar-title").remove();$(".datepicker").prepend('<p class="ftl-calendar-title"><i class="fa fa-calendar-alt"><\/i> '+TravelSearchLabel.lblDateDepartureSelect+"<\/p>");$(".datepicker .next").html('<i class="fa fa-arrow-right"><\/i>');$(".datepicker .prev").html('<i class="fa fa-arrow-left"><\/i>')});$(t).datepicker().on("changeMonth",function(n){setTimeout(function(){Travel.Date.PrevCalendar(n.date);Travel.Date.LunaCalendar()},10)});$(t).datepicker().on("changeYear",function(){setTimeout(function(){Travel.Date.LunaCalendar()},10)});$(t).datepicker().on("changeDecade",function(){setTimeout(function(){Travel.Date.LunaCalendar()},10)});$(t).datepicker().on("changeCentury",function(){setTimeout(function(){Travel.Date.LunaCalendar()},10)});$(n).datepicker().on("show",function(n){Travel.Date.PrevCalendar(n.dates);Travel.Date.LunaCalendar();$(".ftl-calendar-title").remove();$(".datepicker").prepend('<p class="ftl-calendar-title"><i class="fa fa-calendar-alt"><\/i>  '+TravelSearchLabel.lblDateReturnSelect+"<\/p>");$(".datepicker .next").html('<i class="fa fa-arrow-right"><\/i>');$(".datepicker .prev").html('<i class="fa fa-arrow-left"><\/i>')});$(n).datepicker().on("changeMonth",function(n){setTimeout(function(){Travel.Date.PrevCalendar(n.date);Travel.Date.LunaCalendar()},10)});$(n).datepicker().on("changeYear",function(){setTimeout(function(){Travel.Date.LunaCalendar()},10)});$(n).datepicker().on("changeDecade",function(){setTimeout(function(){Travel.Date.LunaCalendar()},10)});$(n).datepicker().on("changeCentury",function(){setTimeout(function(){Travel.Date.LunaCalendar()},10)});if(u=t.val(),u){var i=u.split("-"),e=convertSolar2Lunar(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(7)),o=getDateVi(parseInt(i[1])+"-"+parseInt(i[0])+"-"+parseInt(i[2]))+" "+e[0]+"-"+e[1];$(".lunar-go").html("Âm lịch: "+o+"")}t.change(function(){var i=$(this).val(),u;if(i){var t=i.split("-"),e=convertSolar2Lunar(parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),parseInt(7)),s=getDateVi(parseInt(t[1])+"-"+parseInt(t[0])+"-"+parseInt(t[2]))+" "+e[0]+"-"+e[1];$(".lunar-go").show();$(".lunar-go").html("Âm lịch: "+s+"");var h=n.val(),f=h.split("-"),o=new Date(t[2],parseInt(t[1],10)-1,t[0],"00","00"),c=new Date(f[2],parseInt(f[1],10)-1,f[0],"00","00");o>=c?(u=Travel.Date.NextDate(o),n.val(u),n.datepicker("setStartDate",i),n.datepicker("setDate",u),n.datepicker("show",function(){$(".ftl-calendar-title").remove();$(".datepicker").prepend('<p id="ftl-calendar-title"><i class="fa fa-calendar-alt"><\/i> '+TravelSearchLabel.lblDateReturnSelect+"<\/p>")}),r.ReturnDate=u):n.datepicker("setStartDate",i);r.DepartureDate=i}$("body").css("overflow","unset");$("body").css("position","relative")});n.change(function(){var f=$(this).val(),o,s,h;if(f){var i=f.split("-"),e=t.val(),u=e.split("-"),c=new Date(u[2],parseInt(u[1],10)-1,u[0],"00","00"),l=new Date(i[2],parseInt(i[1],10)-1,i[0],"00","00");if(c>l)return alert("Ngày về phải bằng hoặc sau ngày đi"),o=parseInt(u[0])+"-"+parseInt(u[1])+"-"+parseInt(u[2]),n.val(o),n.datepicker("setStartDate",e),n.datepicker("setDate",o),r.ReturnDate=e,!1;s=convertSolar2Lunar(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(7));h=getDateVi(parseInt(i[1])+"-"+parseInt(i[0])+"-"+parseInt(i[2]))+" "+s[0]+"-"+s[1];$(".lunar-back").show();$(".lunar-back").html("Âm lịch: "+h+"");r.ReturnDate=f}$("body").css("overflow","unset");$("body").css("position","relative")})},DateMutil:function(){$(".ftl-date-mutil").each(function(){var n={format:"dd-mm-yyyy",autoclose:!0,language:ftlLang,todayBtn:"linked",todayHighlight:!0,startDate:"-0d",changeMonth:!0,stepMonths:0,beforeShowDay:Travel.Date.HighlightDays};$(this).datepicker(n);$(this).datepicker().on("show",function(n){Travel.Date.PrevCalendar(n.dates);Travel.Date.LunaCalendar();$(".ftl-calendar-title").remove();$(".datepicker").prepend('<p class="ftl-calendar-title"><i class="fa fa-calendar-alt-alt"><\/i> '+TravelSearchLabel.lblDateDepartureSelect+"<\/p>");$(".datepicker .next").html('<i class="fa fa-arrow-right"><\/i>');$(".datepicker .prev").html('<i class="fa fa-arrow-left"><\/i>')})})},PrevCalendar:function(n){var t=new Date(n),r=t.getMonth(),u=t.getFullYear(),i=new Date,f=i.getMonth(),e=i.getFullYear();r==f&&u==e?($("th.prev").addClass("hide_prev_calendar").removeClass("show_prev_calendar"),$("th.prev").parent("tr").addClass("border_ccc")):($("th.prev").addClass("show_prev_calendar").removeClass("hide_prev_calendar"),$("th.prev").parent("tr").removeClass("border_ccc"))},CalendarVi:function(){$.fn.datepicker.dates.vi={days:["Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Thứ bảy"],daysShort:["Chủ nhật","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],daysMin:["CN","T2","T3","T4","T5","T6","T7"],months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],monthsShort:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],today:"Hôm nay",clear:"Xóa",format:"dd-MM-yyyy"}},CompareDate:function(n,t){try{var i=n.substring(2,4),r=n.substring(0,2),u=n.substring(4,8),f=t.substring(2,4),e=t.substring(0,2),o=t.substring(4,8),s=u.concat(i).concat(r),h=o.concat(f).concat(e);if(s>=h)return!0}catch(c){console.log(c)}return!1},DiffDays:function(n,t){var r=n.getTime(),u=t.getTime(),f=u-r,i=Math.round(f/864e5);return i>=0?"+".concat(i).concat("d"):i.toString().concat("d")},DurationFormat:function(n){if(n<60)return n.toString().concat(" p");var t=Math.floor(n/60),i=n%60,r=t<10?"0".concat(t):t.toString(),u=i<10?"0".concat(i):i.toString();return r.concat("h ").concat(u).concat("p")},List7Day:function(n){var e=new Date,o=Travel.Date.DateFormat(e),u=[],i,r,t,f;try{var s=n.substring(2,4),h=n.substring(0,2),c=n.substring(4,8),l=c.concat("-").concat(s).concat("-").concat(h);for(i=-3;i<=3;i++)r=new Date(l),r.setDate(r.getDate()+i),t=Travel.Date.DateFormat(r),f={day:t.day,dayddMMyyyy:t.dayddMMyyyy,dayyyyyMMdd:t.dayyyyyMMdd,dayOffWeek:TravelDayLabel[t.dayNumber],focus:i==0?!0:!1,active:o.dayyyyyMMdd<=t.dayyyyyMMdd?!0:!1,price:0,priceFormat:"-",priceFull:0,priceFullFormat:"-"},u.push(f)}catch(a){console.log(a)}return u},ConvertPaxDay:function(n,t,i,r){var o=n.substring(0,2),s=n.substring(2,4),h=n.substring(4,8),c=h.concat("-").concat(s).concat("-").concat(o),l=t.substring(0,2),a=t.substring(2,4),v=t.substring(4,8),y=v.concat("-").concat(a).concat("-").concat(l),e=new Date,u=new Date(c),f=new Date(y);return u.setFullYear(u.getFullYear()-i),u.setDate(u.getDate()),f.setFullYear(f.getFullYear()-r),f.setDate(f.getDate()+1),{startDate:Travel.Date.DiffDays(e,f),endDate:Travel.Date.DiffDays(e,u),from:Travel.Date.DayFormat(f),to:Travel.Date.DayFormat(u)}},DateFormat:function(n){n==null&&(n=new Date);var t=n.getDate(),i=n.getMonth()+1,r=n.getFullYear().toString();return t=t<10?"0".concat(t):t.toString(),i=i<10?"0".concat(i):i.toString(),{dayNumber:n.getDay(),day:t.concat("-").concat(i).concat("-").concat(r),dayddMMyyyy:t.concat(i).concat(r),dayyyyyMMdd:r.concat("-").concat(i).concat("-").concat(t)}},DayFormat:function(n){var t=n.getDate(),i=n.getMonth()+1,r=n.getFullYear().toString();return t=t<10?"0".concat(t):t.toString(),i=i<10?"0".concat(i):i.toString(),t.concat("-").concat(i).concat("-").concat(r)},MonthFomat:function(n){if(n!=null&&n.length==6){var t=n.substring(0,2),i=n.substring(2,6);return TravelResultLabel.lblMonth.concat(" ").concat(t).concat(", ").concat(TravelResultLabel.lblYear).concat(" ").concat(i)}return""},DayMonth:function(n){var r,u;if(n!=null&&n.length==6){var f=n.substring(0,2),e=n.substring(2,6),o="01".concat("-").concat(f).concat("-").concat(e),i=new Date,t=parseInt(i.getMonth())+1,s=i.getFullYear().toString();return t=t<10?"0".concat(t):t.toString(),r=t.concat(s),u=n>r?!1:!0,{startDay:o,active:u}}return null},ConverMonth:function(n){var r,t,u,e,o,s;try{if(r=[],n!=null&&n.length==6){var f=n.substring(0,2),h=n.substring(2,6),c=h.concat("-").concat(f).concat("-").concat("01"),i=new Date(c),l=i.getDay();for(t=0;t<l;t++)u={index:0,day:"",month:f,active:!0},r.push(u);for(i.setMonth(i.getMonth()+1),i.setDate(0),t=1;t<=i.getDate();t++)u={index:t,day:t<10&&t>0?"0".concat(t):t,active:!0,month:f},r.push(u);for(t=i.getDay();t<6;t++)u={index:0,day:"",active:!0,month:f},r.push(u);return e=new Date,o=e.getMonth(),i.getMonth()==o&&(s=e.getDate(),r.map(function(n){n.index<s&&(n.active=!1)})),r}return null}catch(a){return null}},ParserMonth:function(n){if(n!=null&&n.length==6){var t=n.substring(0,2),i=n.substring(2,6);return{month:parseInt(t),year:parseInt(i)}}return null},PickerFormat:{options_chd:{format:"dd-mm-yyyy",autoclose:!0,language:ftlLang,changeMonth:!0,stepMonths:0},options_inf:{format:"dd-mm-yyyy",autoclose:!0,language:ftlLang,changeMonth:!0,stepMonths:0},options_passport:{format:"dd-mm-yyyy",autoclose:!0,language:ftlLang,changeMonth:!0,stepMonths:0,startDate:"-0d"}}};Travel.Func={GetQueryParams:function(n){try{var r=n.split("?")[1],u=r.split("&"),t=[],i={};return u.forEach(function(n){t=n.split("=");i[t[0]]=decodeURIComponent(t[1]).replace(/\+/g," ")}),i}catch(f){console.log(f)}return""},Range:function(n,t){var c,s,h;parent=$("#".concat(n)).parents(".ftl-range-slider");label=parent.find(".ftl-range-label");var e=Travel.ResultPrm.filter,i="",r="",o=!1,u=parseInt(t.toString().split(",")[0])||0,f=parseInt(t.toString().split(",")[1])||24;n=="ftl-filter-timeup"||n=="ftl-filter-timedown"?(i=u<10?"0".concat(u).concat(":00"):u.toString().concat(":00"),r=f<10?"0".concat(f).concat(":00"):f.toString().concat(":00"),c={start:i,end:r},n=="ftl-filter-timeup"?((e.time.departure.start!=i||e.time.departure.end!=r)&&(o=!0),e.time.departure=c):((e.time.arrived.start!=i||e.time.arrived.end!=r)&&(o=!0),e.time.arrived=c),i=i.concat(" h"),r=r.concat(" h")):n=="ftl-filter-price"?(i=Travel.Func.MoneyShort(u),r=Travel.Func.MoneyShort(f),s=e.price,(s.selected.min!=u||s.selected.max!=f)&&(o=!0),s.selected.min=u,s.selected.max=f):n=="ftl-filter-duration"&&(i=Travel.Date.DurationFormat(u),r=Travel.Date.DurationFormat(f),h=e.duration,(h.selected.min!=u||h.selected.max!=f)&&(o=!0),h.selected.min=u,h.selected.max=f);label.html(i.concat(' <i class="fa fa-long-arrow-right"><\/i> ').concat(r));Travel.ResultPrm.flight.FlightType=="domestic"?o&&Travel.Result.Domestic():o&&Travel.Result.International()},CheckGeo:function(){var f=Travel.SearchPrm,t=f.Flight,u,n,i,r;if(f.Itinerary==3&&t!=null&&t.length>0)for(u=0;u<t.length;u++){var n=t[u],i=n.StartPoint,r=n.EndPoint;if(i!=""&&(i==r||r=="")){n.EndPoint="";n.EndPointText="";$(".ftl-location").each(function(){var r=$(this).parent().closest("ul"),u=parseInt(r.attr("itinerary"))||0,t,i;if(u==n.Id&&(t=$(this).attr("location"),Travel.SearchPrm.Location=t,t=="arrived"))return $(this).val(""),$(this).removeClass("ftl-req-active"),i=$(this).parent().closest("li"),Travel.Search.AirportQuick(i),!1});break}}else f.Itinerary!=3&&t!=null&&t.length>0&&(n=t[0],n!=null&&(i=n.StartPoint,r=n.EndPoint,i!=""&&(i==r||r=="")&&(n.EndPoint="",n.EndPointText="",$(".ftl-location").each(function(){var n=$(this).attr("location"),t;Travel.SearchPrm.Location=n;n=="arrived"&&($(this).val(""),$(this).removeClass("ftl-req-active"),t=$(this).parent().closest("li"),Travel.Search.AirportQuick(t))}))))},ReplaceAll:function(n,t){try{while(n.indexOf(t)!==-1)n=n.replace(t,"");return n}catch(i){console.log(i)}return""},Sort:function(n,t,i,r){n.sort(function(n,u){if(r)return i=="asc"?n[t]-u[t]:u[t]-n[t];var f=n[t].toLowerCase(),e=u[t].toLowerCase();return i=="asc"?f<e?-1:f>e?1:0:f>e?-1:f<e?1:0})},SortInter:function(){var r=Travel.ResultPrm.filter.sort,f=r.value,t=r.type,i=!0,n="",u;t=="price"?n="TotalPrice":t=="airline"?(n="PlatingCarrier",i=!1):t=="timeup"?(n="MinStartTime",i=!1):t=="timedown"?(n="MinEndTime",i=!1):t=="totaltime"&&(n="TotalDuration");u=Travel.ResultPrm.flight.International.List;Travel.Func.Sort(u,n,f,i);Travel.Result.International()},SortDomes:function(n){var u=Travel.ResultPrm.filter,o=u.sort,f=Travel.Func.GetById(o,"Leg",n),s=f.value,i=f.type,r=!0,t="",e;i=="price"?t=u.fare=="base"?"FareAdt":"FareAdtFull":i=="airline"?(t="Airline",r=!1):i=="timeup"?(t="StartTime",r=!1):i=="timedown"?(t="EndTime",r=!1):i=="totaltime"&&(t="Duration");e=Travel.ResultPrm.flight.Domestic.filter(function(t){return t.Leg==n})[0].List;Travel.Func.Sort(e,t,s,r);Travel.Result.Domestic()},GetById:function(n,t,i){if(n!=null&&n.length>0){var r=n.filter(function(n){return n[t]==i});if(r!=null&&r.length>0)return r[0]}return null},MoneyFormat:function(n){return n.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},MoneyShort:function(n){var t;return t=n<1e6?n/1e3:(n/1e6).toFixed(3).replace(".",","),t.toString().concat(" k")},ScrollIndex:function(n,t){var i=$(t),r=$(n),u=i.width(),f=r.width();i.scrollLeft(parseInt(u/2)-35)},ProgressBar:function(n){var t=$(".progress-wrap").width(),i=n/100*t;$(".progress-bar").stop().animate({left:i},2500)},PageOnload:function(n){var t={Page:n,Language:ftlLang,Url:vemaybay.url!=undefined?vemaybay.url:"/",Sort:vemaybay.sort!=undefined?vemaybay.sort:"price",Fare:vemaybay.fare!=undefined?vemaybay.fare:"base"};n!="search"&&(t.ListGeoCode=Travel.ResultPrm!=null?Travel.ResultPrm.prms.ListGeoCode:null,t.Code=Travel.Booking!=undefined?Travel.Booking.Code:"");$.ajax({url:ftlPath+"/data/onload",type:"POST",data:t,success:function(i){var r,u;i.StatusCode==200?(Travel.Config=i.Config,r=i.GeoJs,eval(r),u=i.SearchJs,eval(u),n=="result"&&Travel.Func.OnloadResponse(t.Code,i)):console.log(error)},error:function(n){console.log(n)}})},OnloadResponse:function(n,t){var f,e,o,i,s,h,c,l,a,v,y,r,u;Travel.Resource={UrlImageAirline:t.UrlImageAirline,UrlImageIcon:t.UrlImageIcon,UrlImagePayment:t.UrlImagePayment};n!=""?(f=t.BookingConfirmJs,eval(f),e=t.BookingPaymentJs,eval(e),o=t.BookingPaymentStatusJs,eval(o),Travel.Connect.BookingConfirm(),Travel.Search.Form(),Travel.SearchReady()):(i=Travel.ResultPrm.flight,i.ListGeoCode=t.ListGeoCode,i.FlightType=t.FlightType,i.ListCountries=t.ListCountries,Travel.Result.Loading(),s=t.FlightJs,eval(s),h=t.DateMinPriceJs,eval(h),c=t.BaggageJs,eval(c),l=t.FareRuleJs,eval(l),a=t.BookingJs,eval(a),v=t.FlightCouponJs,eval(v),i.MonthSelect?(y=t.FlightMonthJs,eval(y),Travel.Connect.FlightMonth()):i.FlightType.toLowerCase()=="domestic"?(Travel.Result.DomesticMain(),$(".progress-wrap").removeClass("ftl-none"),r=i.SearchAirline,u=t.ListAirline,r.Select=!0,r.Total=u.length,u.map(function(n){var i=Travel.ResultPrm.prms.ListFlight,t=[];i.map(function(i){var r={StartPoint:i.StartPoint,EndPoint:i.EndPoint,DepartDate:i.DepartDate,Airline:n};t.push(r)});Travel.Connect.Flight(t)}),Travel.Connect.DateMinPrice()):Travel.Connect.Flight(null))},FlightResponse:function(n){var f=n.FlightType,t,o,h,c,i,l,a,v;if(f!=undefined){if(t=Travel.ResultPrm.flight,o=Travel.Config,n.StatusCode==200){t.FlightType=f;try{n.ListAirline.map(function(n){t.ListAirline.indexOf(n)==-1&&t.ListAirline.push(n)})}catch(s){}try{n.ListAircraft.map(function(n){t.ListAircraft.indexOf(n)==-1&&t.ListAircraft.push(n)})}catch(s){}try{n.ListGeoCode.map(function(n){t.ListGeoCode.indexOf(n)==-1&&t.ListGeoCode.push(n)})}catch(s){}if(f.toLowerCase()=="domestic"){h=n.DomesticDatas;c=t.Domestic;try{c.map(function(n){var t=h.filter(function(t){return t.Leg==n.Leg});t.map(function(t){n.List.push(t)})})}catch(s){console.log(s)}i=t.SearchAirline;i.Counter++;l=i.Total;a=i.Counter;a==l&&(i.Success=!0,$(".progress-wrap").addClass("ftl-none"));Travel.Func.ProgressBar(i.Counter*25);try{v=Travel.ResultPrm.filter.sort;v.map(function(n){n.type=o.StartSortListFlight;Travel.Func.SortDomes(n.Leg)})}catch(s){console.log(s)}Travel.Result.Domestic()}else{if(Travel.ResultPrm.BaggageMesage=n.baggageMesage,Travel.Result.InternationalMain(),n.InternationalDatas.length==0)Travel.Result.International();else{var e=Travel.ResultPrm.filter,r=e.price,u=e.duration;t.International.List=[];t.International.List=n.InternationalDatas;r.min.value=n.MinPrice;r.min.title=n.MinPriceFormat;r.max.value=n.MaxPrice;r.max.title=n.MaxPriceFormat;r.selected.min=n.MinPrice;r.selected.max=n.MaxPrice;u.min.value=n.MinDuration;u.min.title=n.MinDurationFormat;u.max.value=n.MaxDuration;u.max.title=n.MaxDurationFormat;u.selected.min=n.MinDuration;u.selected.max=n.MaxDuration;n.StopNums.map(function(n){var t={value:n,isSelect:!0};e.stop.push(t)});t.SearchAirline.Success=!0;Travel.Result.International()}$("ul.ftl-list-date").find("li").each(function(){$(this).removeClass("ftl-price-loading");$(".ftl-date-price").remove()})}Travel.Result.BoxAirline(!0)}}else Travel.Result.Messages(TravelResultLabel.lblEmptyFlight,"return")},BookingReq:function(){var s=Travel.ResultPrm,u=s.flight,t=s.book,h=u.Baggage,c=h.list,n={},r,i,e,o,f;n.IpRequest=Travel.ResultPrm.IpRequest;n.Language=ftlLang;n.FlightType=u.FlightType;n.ListFlight=[];n.ListFareData=[];u.FlightType=="domestic"?(i=u.FlightSelect,i!=null&&i.length>0&&i.map(function(t){var i={};i.Session=t.Session;i.FareDataId=t.FareDataId;i.ListFlight=[{FlightValue:t.FlightValue,FlightId:t.FlightId,Leg:t.Leg}];n.ListFareData.push(i)})):(r={},i=u.FlightSelect[0],i!=null&&(r.Session=i.Session,r.FareDataId=i.FareDataId,r.AutoIssue=!1,r.ListFlight=[],e=i.ListFlight.filter(function(n){return n.IsSelect==!0}),e!=null&&e.length>0&&e.map(function(n){var t={FlightValue:n.FlightValue,FlightId:n.FlightId,Leg:n.Leg};r.ListFlight.push(t)}),n.ListFareData.push(r)));n.ListPassenger=[];$("ul.ftl-pax-info li").each(function(t){var i=$(this).attr("type"),u,f;if(t>0){var o=$(this).children().find(".ftl-input-gender").val(),s=$(this).children().find(".ftl-input-firstname").val(),h=$(this).children().find(".ftl-input-lastname").val(),r="";i.toLowerCase()=="chd"?r=$(this).children().find(".ftl-picker-chd").val():i.toLowerCase()=="inf"&&(r=$(this).children().find(".ftl-picker-inf").val());u=$(this).children().find(".ftl-input-country");f="";u!=undefined&&(f=u.val());var l=$(this).children().find(".ftl-input-passport").val(),a=$(this).children().find(".ftl-input-passport-expiredate").val(),e={Index:t-1,FirstName:s,LastName:h,Gender:o,Type:i.toUpperCase(),Birthday:Travel.Func.ReplaceAll(r,"-",""),Nationality:f,PassportNumber:l,PassportExpirationDate:Travel.Func.ReplaceAll(a,"-",""),ListBaggage:[]};$(this).children().find(".ftl-input-baggage").each(function(){var r=parseInt($(this).attr("leg"))||0,t=parseInt($(this).val())||0,n,i;t!=0&&(n=c.filter(function(n){return n.Code==t&&n.Leg==r})[0],n!=undefined&&(i={Airline:n.Airline,Leg:n.Leg,Route:n.Route,Code:n.Code,Currency:n.Currency,Name:n.Name,Price:n.Price,Value:n.Value},e.ListBaggage.push(i)))});n.ListPassenger.push(e)}});n.Contact={};$("[name=ftl-contact]").each(function(t){var i=$(this).val(),r;t==0?n.Contact.Gender=i==1?!0:!1:t==1?(r=i.indexOf(" "),r>0?(n.Contact.FirstName=i.substring(0,r),n.Contact.LastName=i.substring(r+1,i.length)):(n.Contact.FirstName=i,n.Contact.LastName=i)):t==2?n.Contact.Phone=i:t==3?n.Contact.Email=i:t==4?n.Contact.Address=i:t==5&&(n.Remark=i,n.Contact.Description=i)});t.Booking={};t.Booking=n;t.PaymentMethod==""?(o=Travel.Config.PaymentMethod,n.PaymentMethod=o!=undefined&&o.length>0?o[0].Name:""):(n.PaymentMethod=t.PaymentMethod,n.PaymentCode=t.PaymentCode,n.PaymentFee=t.PaymentFee);t.Invoice={};t.IsBilling&&$("[name=ftl-invoice]").each(function(n){var i=$(this).val();n==0?t.Invoice.CompanyName=i:n==1?t.Invoice.Address=i:n==2?t.Invoice.City=i:n==3?t.Invoice.TaxCode=i:n==4?t.Invoice.Receiver=i:n==5&&(t.Invoice.Email=i)});f=Travel.ResultPrm.flight.Coupon;f!=null&&f.CouponAmount>0&&(n.CouponCode=f.CouponCode,n.CouponAmount=f.CouponAmount);Travel.Connect.Booking(t)},Modal:function(){var n="";n+='<div id="ftl-modal-backdrop" class="ftl-none"><\/div>';n+='<div id="ftl-modal-message" class="ftl-none"><\/div>';n+='<div id="ftl-modal" class="ftl-none"><\/div>';n+='<div id="ftl-modal-container" class="ftl-none">';n+='  <button type="button" class="ftl-modal-close"><i class="fa fa-times"><\/i><\/button>';n+="<\/div>";n+='<div id="ftl-modal-cart" class="ftl-none">';n+='  <div class="ftl-cart-icon"><i class="fa fa-shopping-cart"><\/i><\/div>';n+='  <div class="ftl-cart-basket"><\/div>';n+="<\/div>";$("body").prepend(n)}};Travel.Validate={Logo:function(n){try{var t=Travel.Resource;return t.UrlImageAirline.concat(n.Logo)}catch(i){return""}},Email:function(n){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)},Phone:function(n){return/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g.test(n)},Booking:function(){var n=!0;$(".ftl-req").each(function(){var r=$(this).parent().closest("div");r.addClass("ftl-req-active");var i=$(this).attr("type"),u=$(this).attr("name"),t=$(this).val();if(t==""?n=!1:i=="email"?n=Travel.Validate.Email(t):i=="tel"?n=Travel.Validate.Phone(t):i=="text"&&u!="ftl-invoice"&&u!="ftl-contact"&&(n=Travel.Validate.Name(t)),n)r.removeClass("ftl-req-active");else return $(this).focus(),$("html, body").animate({scrollTop:$(this).offset().top-500},1e3),!1});n&&Travel.Result.Messages(TravelResultLabel.lblConfirmBook,"confirm")},Name:function(n){var t=!0;return["aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","iii","jjj","mmm","nnn","ooo","ppp","qqq","rrr","sss","ttt","uuu","vvv","www","xxx","yyy","zzz"].map(function(i){n.toLowerCase().indexOf(i)>-1&&(t=!1)}),t}};Travel.Slider=function(){new rSlider({target:"#ftl-filter-timeup",values:{min:0,max:24},step:1,range:!0,tooltip:!1,scale:!1,labels:!1,onChange:function(n){Travel.Func.Range("ftl-filter-timeup",n)}});new rSlider({target:"#ftl-filter-timedown",values:{min:0,max:24},step:1,range:!0,tooltip:!1,scale:!1,labels:!1,onChange:function(n){Travel.Func.Range("ftl-filter-timedown",n)}});Travel.Func.ScrollIndex(".ftl-date-active","ul.ftl-list-date")};