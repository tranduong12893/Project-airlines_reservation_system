function INT(n){return Math.floor(n)}function jdFromDate(n,t,i){var f,r,e,u;return f=INT((14-t)/12),r=i+4800-f,e=t+12*f-3,u=n+INT((153*e+2)/5)+365*r+INT(r/4)-INT(r/100)+INT(r/400)-32045,u<2299161&&(u=n+INT((153*e+2)/5)+365*r+INT(r/4)-32083),u}function jdToDate(n){var u,i,r,f,e,t,o,s,h;return n>2299160?(u=n+32044,i=INT((4*u+3)/146097),r=u-INT(i*146097/4)):(i=0,r=n+32082),f=INT((4*r+3)/1461),e=r-INT(1461*f/4),t=INT((5*e+2)/153),o=e-INT((153*t+2)/5)+1,s=t+3-12*INT(t/10),h=i*100+f-4800+INT(t/10),[o,s,h]}function NewMoon(n){var r,u,o,t,h,e,f,s,i,c;return r=n/1236.85,u=r*r,o=u*r,t=PI/180,h=2415020.75933+29.53058868*n+.0001178*u-155e-9*o,h=h+.00033*Math.sin((166.56+132.87*r-.009173*u)*t),e=359.2242+29.10535608*n-333e-7*u-347e-8*o,f=306.0253+385.81691806*n+.0107306*u+1236e-8*o,s=21.2964+390.67050646*n-.0016528*u-239e-8*o,i=(.1734-.000393*r)*Math.sin(e*t)+.0021*Math.sin(2*t*e),i=i-.4068*Math.sin(f*t)+.0161*Math.sin(t*2*f),i=i-.0004*Math.sin(t*3*f),i=i+.0104*Math.sin(t*2*s)-.0051*Math.sin(t*(e+f)),i=i-.0074*Math.sin(t*(e-f))+.0004*Math.sin(t*(2*s+e)),i=i-.0004*Math.sin(t*(2*s-e))-.0006*Math.sin(t*(2*s+f)),i=i+.001*Math.sin(t*(2*s-f))+.0005*Math.sin(t*(2*f+e)),c=r<-11?.001+.000839*r+.0002261*u-845e-8*o-81e-9*r*o:-.000278+.000265*r+.000262*u,h+i-c}function SunLongitude(n){var t,i,r,f,o,e,u;return t=(n-2451545)/36525,i=t*t,r=PI/180,f=357.5291+35999.0503*t-.0001559*i-48e-8*t*i,o=280.46645+36000.76983*t+.0003032*i,e=(1.9146-.004817*t-14e-6*i)*Math.sin(r*f),e=e+(.019993-.000101*t)*Math.sin(r*2*f)+.00029*Math.sin(r*3*f),u=o+e,u=u*r,u-PI*2*INT(u/(PI*2))}function getSunLongitude(n,t){return INT(SunLongitude(n-.5-t/24)/PI*6)}function getNewMoonDay(n,t){return INT(NewMoon(n)+.5+t/24)}function getLunarMonth11(n,t){var r,u,i,f;return u=jdFromDate(31,12,n)-2415021,r=INT(u/29.530588853),i=getNewMoonDay(r,t),f=getSunLongitude(i,t),f>=9&&(i=getNewMoonDay(r-1,t)),i}function getLeapMonthOffset(n,t){var u,f,r,i;u=INT((n-2415021.0769986948)/29.530588853+.5);f=0;i=1;r=getSunLongitude(getNewMoonDay(u+i,t),t);do f=r,i++,r=getSunLongitude(getNewMoonDay(u+i,t),t);while(r!=f&&i<14);return i-1}function convertSolar2Lunar(n,t,i,r){var h,o,e,u,c,a,f,s,l;return o=jdFromDate(n,t,i),h=INT((o-2415021.0769986948)/29.530588853),e=getNewMoonDay(h+1,r),e>o&&(e=getNewMoonDay(h,r)),u=getLunarMonth11(i,r),c=u,u>=e?(s=i,u=getLunarMonth11(i-1,r)):(s=i+1,c=getLunarMonth11(i+1,r)),a=o-e+1,diff=INT((e-u)/29),l=0,f=diff+11,c-u>365&&(leapMonthDiff=getLeapMonthOffset(u,r),diff>=leapMonthDiff&&(f=diff+10,diff==leapMonthDiff&&(l=1))),f>12&&(f=f-12),f>=11&&diff<4&&(s-=1),[a,f,s,l]}function convertLunar2Solar(n,t,i,r,u){var c,e,s,f,h,o,l;if(t<11?(e=getLunarMonth11(i-1,u),s=getLunarMonth11(i,u)):(e=getLunarMonth11(i,u),s=getLunarMonth11(i+1,u)),c=INT(.5+(e-2415021.0769986948)/29.530588853),f=t-11,f<0&&(f+=12),s-e>365){if(h=getLeapMonthOffset(e,u),o=h-2,o<0&&(o+=12),r!=0&&t!=o)return[0,0,0];(r!=0||f>=h)&&(f+=1)}return l=getNewMoonDay(c+f,u),jdToDate(l+n-1)}function getDateVi(n){var n=new Date(n),i=n.getDay(),t="";switch(i){case 0:t="Chủ nhật";break;case 1:t="Thứ hai";break;case 2:t="Thứ ba";break;case 3:t="Thứ tư";break;case 4:t="Thứ năm";break;case 5:t="Thứ sáu";break;case 6:t="Thứ bảy"}return t}var PI=Math.PI;